<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description"
    content="Blog posts by Aksh Thakkar, a Computer Science student at Parul University, covering web development, AI, and technology insights.">
  <meta property="og:title" content="Aksh Thakkar - Blogs">
  <meta property="og:description" content="Explore web development, AI, and tech insights by Aksh Thakkar.">
  <meta property="og:url" content="https://akshhthakkar.github.io/blog.html">
  <meta property="og:type" content="website">
  <title>Aksh Thakkar - Blogs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.2/marked.min.js"></script>
  <script>
    window.addEventListener("load", () => {
      // Ensure marked is loaded before use, though it's not strictly used on this page for rendering
      if (typeof marked === "undefined") {
        const s = document.createElement("script");
        s.src = "https://cdn.jsdelivr.net/npm/marked@12.0.2/lib/marked.min.js";
        s.async = true;
        document.head.appendChild(s);
      }
    });

    // Lazy load function using Intersection Observer
    function lz(e, c) {
      const o = new IntersectionObserver((t, r) => {
        t.forEach(i => {
          if (i.isIntersecting) {
            c(i.target);
            r.unobserve(i.target);
          }
        });
      }, { rootMargin: "100px" });
      o.observe(e);
    }
  </script>
  <style>
    html {
      box-sizing: border-box;
      scroll-behavior: smooth
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit
    }

    :root {
      --bg: #fff;
      --txt: #333;
      --hdt: #000;
      --acc: #007bff;
      --ach: #0056b3;
      --nbm: #f8f8f8;
      --cbg: #fff;
      --cbd: #e8e8e8;
      --sl: rgba(0, 0, 0, 0.02);
      --hl: rgba(0, 0, 0, 0.05);
      --sob: #ccc;
      --son: #4CAF50;
      --scc: #fff;
      --sbd: #999;
      --hgs: #e0f2f7;
      --hgm: #ccecf7;
      --hge: #fff
    }

    [data-theme="dark"] {
      --bg: #121212;
      --txt: #e0e0e0;
      --hdt: #fff;
      --acc: #66b3ff;
      --ach: #4da6ff;
      --nbm: #1a1a1a;
      --cbg: #1e1e1e;
      --cbd: #252525;
      --sl: rgba(255, 255, 255, 0.02);
      --hl: rgba(255, 255, 255, 0.05);
      --sob: #555;
      --son: #2196F3;
      --sbd: #777;
      --hgs: #0a2a4a;
      --hgm: #1a3a5a;
      --hge: #121212
    }

    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: var(--bg);
      color: var(--txt);
      transition: background 0.3s, color 0.3s;
      line-height: 1.6
    }

    .nb {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background: var(--bg);
      box-shadow: 0 1px 4px var(--sl);
      position: sticky;
      top: 0;
      z-index: 10
    }

    [data-theme="dark"] .nb {
      box-shadow: 0 1px 4px var(--sl)
    }

    .nb-b {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--hdt);
      text-decoration: none
    }

    .nb-l {
      list-style: none;
      display: flex;
      gap: 1.8rem;
      margin: 0;
      padding: 0;
      align-items: center
    }

    .nb-l li a {
      text-decoration: none;
      color: var(--txt);
      font-weight: 500;
      transition: color 0.2s ease-in-out;
      position: relative;
      padding-bottom: 0.2rem
    }

    .nb-l li a:hover {
      color: var(--acc)
    }

    .nb-l li a::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      background-color: var(--acc);
      transition: width 0.3s ease-in-out
    }

    .nb-l li a:hover::after {
      width: 100%
    }

    .ts {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
      user-select: none;
      -webkit-tap-highlight-color: transparent
    }

    .ts input {
      opacity: 0;
      width: 0;
      height: 0
    }

    .sld {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--sob);
      border-radius: 34px;
      transition: background-color 0.4s;
      border: 1px solid var(--sbd)
    }

    .sld:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 3px;
      background-color: var(--scc);
      border-radius: 50%;
      transition: transform 0.4s;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      z-index: 2
    }

    .ts input:checked+.sld {
      background-color: var(--son);
      border-color: var(--son)
    }

    .ts input:checked+.sld:before {
      transform: translateX(26px)
    }

    .sld .ik {
      position: absolute;
      top: 50%;
      font-size: 0.7em;
      color: var(--txt);
      transition: transform 0.4s, opacity 0.4s;
      z-index: 3
    }

    .sld .fs {
      left: 11px;
      transform: translateY(-50%) translateX(0);
      opacity: 1
    }

    .sld .fm {
      left: 37px;
      transform: translateY(-50%) translateX(0);
      opacity: 0
    }

    .ts input:checked+.sld .fs {
      transform: translateY(-50%) translateX(26px);
      opacity: 0
    }

    .ts input:checked+.sld .fm {
      transform: translateY(-50%) translateX(-26px);
      opacity: 1
    }

    .dts {
      margin-left: 1.5rem;
      display: flex;
      align-items: center
    }

    .mcg {
      display: none;
      align-items: center;
      gap: 1rem
    }

    .ham {
      display: none;
      font-size: 1.8rem;
      background: none;
      border: none;
      color: var(--txt);
      cursor: pointer;
      padding: 0.5rem;
      z-index: 11
    }

    .ct {
      max-width: 1000px;
      margin: auto;
      padding: 2rem
    }

    .hr {
      background: linear-gradient(135deg, var(--hgs) 0%, var(--hgm) 50%, var(--hge) 100%);
      padding: 3rem 2rem;
      border-radius: 16px;
      text-align: center;
      margin-bottom: 3rem;
      animation: fadeIn 0.8s ease-out;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1)
    }

    [data-theme="dark"] .hr {
      background: linear-gradient(135deg, var(--hgs) 0%, var(--hgm) 50%, var(--hge) 100%);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4)
    }

    .hr h1 {
      font-size: 3.2rem;
      margin-bottom: 0.8rem;
      color: var(--hdt);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
      letter-spacing: 0.05em;
      line-height: 1.2
    }

    [data-theme="dark"] .hr h1 {
      text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.15)
    }

    .hr p {
      font-size: 1.3rem;
      line-height: 1.6;
      color: var(--txt);
      opacity: 0.95;
      max-width: 700px;
      margin: 0.5rem auto 0 auto;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.05)
    }

    [data-theme="dark"] .hr p {
      text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.05)
    }

    .hr::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 10% 20%, rgba(0, 0, 0, 0.05) 0%, transparent 20%), radial-gradient(circle at 90% 80%, rgba(0, 0, 0, 0.05) 0%, transparent 20%);
      opacity: 0.5;
      z-index: 1;
      pointer-events: none
    }

    [data-theme="dark"] .hr::before {
      background: radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 20%), radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 20%)
    }

    .hr h1,
    .hr p {
      position: relative;
      z-index: 2
    }

    .bg {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem
    }

    .bc {
      background: var(--cbg);
      border: 1px solid var(--cbd);
      border-left: 5px solid var(--acc);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 15px var(--sl);
      transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      position: relative;
      overflow: hidden;
      opacity: 0;
      /* Start invisible for lazy loading */
    }

    [data-theme="dark"] .bc {
      border: 1px solid var(--cbd);
      border-left: 5px solid var(--acc);
      box-shadow: 0 4px 15px var(--sl)
    }

    .bc.visible {
      opacity: 1;
      animation: fadeInCard 0.5s ease-out forwards;
      /* Add fade-in animation for visible cards */
    }

    @keyframes fadeInCard {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }


    .bc:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 15px 30px var(--hl)
    }

    [data-theme="dark"] .bc:hover {
      box-shadow: 0 15px 30px var(--hl)
    }

    .bc a.btl {
      text-decoration: none;
      color: var(--acc);
      font-weight: 600;
      font-size: 1.35rem;
      display: block;
      margin-bottom: 0.5rem;
      transition: color 0.2s
    }

    .bc a.btl:hover {
      color: var(--ach);
      text-decoration: underline
    }

    .bc p {
      font-size: 0.95rem;
      color: var(--txt);
      opacity: 0.9;
      margin: 0 0 1rem 0;
      flex-grow: 1
    }

    .bc .bm {
      display: flex;
      align-items: center;
      font-size: 0.85rem;
      color: var(--txt);
      opacity: 0.7;
      margin-bottom: 0.5rem;
      gap: 0.75rem;
      flex-wrap: wrap
    }

    [data-theme="dark"] .bc .bm {
      color: var(--txt)
    }

    .bc .bm span {
      display: flex;
      align-items: center;
      gap: 0.3rem
    }

    .bc .bm .fas {
      font-size: 0.9em;
      color: var(--acc)
    }

    .bc .bl {
      display: inline-block;
      margin-top: 0.75rem;
      padding: 0.6rem 1.2rem;
      background-color: var(--acc);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      transition: background-color 0.2s, transform 0.1s ease-in-out;
      align-self: flex-start;
      box-shadow: 0 2px 5px var(--sl)
    }

    [data-theme="dark"] .bl {
      box-shadow: 0 2px 5px var(--sl)
    }

    .bc .bl:hover {
      background-color: var(--ach);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px var(--hl)
    }

    [data-theme="dark"] .bl:hover {
      box-shadow: 0 4px 8px var(--hl)
    }

    .bc .bl .fas {
      margin-left: 0.5rem;
      font-size: 0.8em
    }

    .sc {
      background: var(--cbg);
      border: 1px solid var(--cbd);
      border-left: 5px solid var(--acc);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 15px var(--sl);
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      animation: pulse 1.5s infinite ease-in-out
    }

    [data-theme="dark"] .sc {
      box-shadow: 0 4px 15px var(--sl)
    }

    .sl {
      background-color: var(--cbd);
      border-radius: 4px;
      height: 1em;
      margin-bottom: 0.5em
    }

    .sl.t {
      width: 80%;
      height: 1.3em
    }

    .sl.m {
      width: 60%;
      height: 0.8em
    }

    .sl.x {
      width: 100%;
      height: 0.9em
    }

    .sl.x:nth-child(3) {
      width: 95%
    }

    .sl.x:nth-child(4) {
      width: 85%
    }

    .sl.b {
      width: 120px;
      height: 2.2em;
      margin-top: 0.75rem
    }

    @keyframes pulse {
      0% {
        opacity: 0.6
      }

      50% {
        opacity: 1
      }

      100% {
        opacity: 0.6
      }
    }

    .btn {
      display: inline-block;
      padding: 0.6rem 1.2rem;
      background-color: var(--acc);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      transition: background-color 0.2s, transform 0.1s ease-in-out;
      font-weight: 600;
      box-shadow: 0 2px 5px var(--sl)
    }

    .btn:hover {
      background-color: var(--ach);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px var(--hl)
    }

    [data-theme="dark"] .btn {
      box-shadow: 0 2px 5px var(--sl)
    }

    [data-theme="dark"] .btn:hover {
      box-shadow: 0 4px 8px var(--hl)
    }

    .ft {
      text-align: center;
      padding: 1rem;
      background: var(--bg);
      color: var(--txt);
      margin-top: 2rem;
      box-shadow: 0 -1px 4px var(--sl)
    }

    [data-theme="dark"] .ft {
      box-shadow: 0 -1px 4px var(--sl)
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px)
      }

      to {
        opacity: 1;
        transform: translateY(0)
      }
    }

    @media (max-width: 768px) {
      .nb {
        padding: 1rem 1.5rem;
        flex-wrap: nowrap
      }

      .nb-b {
        flex-grow: 1;
        font-size: 1.4rem
      }

      .nb-l {
        display: none;
        flex-direction: column;
        width: 100%;
        background-color: var(--nbm);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: absolute;
        top: 100%;
        left: 0;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out
      }

      .nb-l.active {
        display: flex;
        max-height: 300px
      }

      .nb-l li {
        width: 100%;
        text-align: center;
        padding: 0.8rem 0
      }

      .dts {
        display: none
      }

      .mcg {
        display: flex
      }

      .ham {
        display: block
      }

      .ct {
        padding: 1rem
      }

      .hr h1 {
        font-size: 2.5rem
      }

      .hr p {
        font-size: 1.1rem
      }

      .bg {
        grid-template-columns: 1fr
      }

      .bc .bm {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.25rem
      }
    }

    @media (max-width: 480px) {
      .nb {
        padding: 1rem
      }

      .hr h1 {
        font-size: 1.8rem
      }

      .hr p {
        font-size: 1rem
      }
    }
  </style>
</head>

<body data-theme="light">
  <nav class="nb"><a href="index.html" class="nb-b"><strong>Aksh</strong></a>
    <ul class="nb-l">
      <li><a href="index.html#about">About</a></li>
      <li><a href="index.html#certifications">Certifications</a></li>
      <li><a href="blog.html" id="navBlogsLink">Blogs</a></li>
      <li><a href="repositories.html">Repositories</a></li>
      <li class="dts"><label class="ts" aria-label="Toggle dark mode"><input type="checkbox" id="t-d"><span
            class="sld"><i class="fas fa-sun ik fs"></i><i class="fas fa-moon ik fm"></i></span></label></li>
    </ul>
    <div class="mcg"><label class="ts" aria-label="Toggle dark mode"><input type="checkbox" id="t-m"><span
          class="sld"><i class="fas fa-sun ik fs"></i><i class="fas fa-moon ik fm"></i></span></label><button
        class="ham" aria-label="Toggle navigation menu">☰</button></div>
  </nav>
  <section class="ct">
    <div class="hr">
      <h1>My Blogs</h1>
      <p>Exploring web development, AI, and technology insights from local posts and DEV.to.</p>
    </div>
    <div class="bg" id="bl"></div>
  </section>
  <footer class="ft">
    <p>© 2025 Aksh Thakkar</p>
  </footer>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const b = document.body;
      const d = document.getElementById("t-d"); // Desktop toggle
      const m = document.getElementById("t-m"); // Mobile toggle
      const h = document.querySelector(".ham");
      const n = document.querySelector(".nb-l");
      const l = document.getElementById("bl"); // Blog list container
      const navBlogsLink = document.getElementById("navBlogsLink"); // Get the Blogs link

      // Function to set theme
      function setTheme(theme) {
        b.setAttribute("data-theme", theme);
        // Ensure both toggles reflect the current theme state
        if (d) d.checked = theme === "dark";
        if (m) m.checked = theme === "dark";
        localStorage.setItem("theme", theme);
      }

      // Initialize theme from localStorage or default to light
      const savedTheme = localStorage.getItem("theme") || "light";
      setTheme(savedTheme);

      // Add event listeners for theme toggles
      if (d) d.addEventListener("change", () => {
        setTheme(d.checked ? "dark" : "light");
      });
      if (m) m.addEventListener("change", () => {
        setTheme(m.checked ? "dark" : "light");
      });


      // Hamburger menu toggle
      if (h && n) {
        h.addEventListener("click", () => n.classList.toggle("active"));
      }

      // Close mobile menu when a link is clicked
      document.querySelectorAll(".nb-l li a").forEach(i => i.addEventListener("click", () => {
        if (n.classList.contains("active")) n.classList.remove("active")
      }));

      // Function to format date
      function formatDate(dateString) {
        return dateString ? new Date(dateString).toLocaleDateString("en-US", {
          year: "numeric",
          month: "long",
          day: "numeric"
        }) : "Date N/A"
      }

      // Skeleton loading cards
      function showSkeletonCards(count = 3) {
        l.innerHTML = ""; // Clear existing content
        for (let i = 0; i < count; i++) {
          const s = document.createElement("div");
          s.className = "sc";
          s.innerHTML = '<div class="sl t"></div><div class="sl m"></div><div class="sl x"></div><div class="sl x"></div><div class="sl b"></div>';
          l.appendChild(s);
        }
      }

      // Fetch Blogs function
      async function fetchBlogs(forceRefresh = false) { // Added forceRefresh parameter
        const cacheKey = "dtb"; // Data cache key
        const cacheTimestampKey = "dtbt"; // Timestamp cache key
        const cacheDuration = 5 * 60 * 1000; // 5 minutes in milliseconds

        const cachedBlogs = localStorage.getItem(cacheKey);
        const cachedTimestamp = localStorage.getItem(cacheTimestampKey);

        // Check cache only if forceRefresh is false
        if (!forceRefresh && cachedBlogs && cachedTimestamp && (Date.now() - cachedTimestamp) < cacheDuration) {
          console.log("Serving blogs from cache.");
          renderBlogs(JSON.parse(cachedBlogs));
          return;
        }

        console.log("Fetching blogs from DEV.to API...");
        showSkeletonCards(); // Show loading skeletons

        try {
          const response = await fetch("https://dev.to/api/articles?username=akshthakkar&per_page=30");
          if (!response.ok) {
            throw new Error(`DEV.to API error: ${response.status} ${response.statusText}`);
          }
          const data = await response.json();

          localStorage.setItem(cacheKey, JSON.stringify(data));
          localStorage.setItem(cacheTimestampKey, Date.now());

          renderBlogs(data);
        } catch (e) {
          console.error("Error fetching blogs:", e);
          l.innerHTML = `<div id="err" style="text-align:center; padding: 2rem;"><p>Failed to load blogs: ${e.message}</p><button class="btn" onclick="fetchBlogs(true)">Retry</button></div>`; // Retry forces refresh
        }
      }

      // Render Blogs function
      function renderBlogs(data) {
        l.innerHTML = ""; // Clear current content

        if (!data || data.length === 0) {
          l.innerHTML = "<div style='text-align:center; padding: 2rem;'>No blogs found. Start writing!</div>";
          return;
        }

        // Map DEV.to article data to a simpler structure
        const blogPosts = data.map(post => ({
          title: post.title,
          url: `article.html?id=${post.id}&slug=${encodeURIComponent(post.slug)}`, // Construct URL for individual article
          description: post.description || "No excerpt available. Click to read the full post.",
          source: "DEV.to",
          publishedAt: post.published_at // Use this for sorting
        }));

        // Sort by published date, newest first
        blogPosts.sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));

        blogPosts.forEach(post => {
          const card = document.createElement("div");
          card.className = "bc"; // Blog card class
          card.setAttribute("role", "article");
          card.innerHTML = `
            <a href="${post.url}" class="btl" aria-label="Read ${post.title}">${post.title}</a>
            <div class="bm">
              <span><i class="fas fa-calendar-alt" aria-hidden="true"></i> ${formatDate(post.publishedAt)}</span>
              <span><i class="fas fa-globe" aria-hidden="true"></i> ${post.source}</span>
            </div>
            <p>${post.description}</p>
            <a href="${post.url}" class="bl" aria-label="Read more about ${post.title}">Read More <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
          `;
          l.appendChild(card);

          // Apply lazy loading to each card
          lz(card, element => element.classList.add("visible"));
        });
      }

      // --- NEW LOGIC FOR NAVBAR CLICK ---
      if (navBlogsLink) {
        navBlogsLink.addEventListener('click', (event) => {
          // Check if the current page is blog.html
          // If it's already on blog.html, prevent default navigation
          // and force a refresh. If it's navigating from another page,
          // the page will load, and then the initial fetchBlogs() will run.
          if (window.location.pathname.endsWith('/blog.html') || window.location.pathname.endsWith('/blog.html#')) {
            event.preventDefault(); // Stop the default link behavior
            localStorage.removeItem("dtb"); // Clear cached data
            localStorage.removeItem("dtbt"); // Clear cached timestamp
            console.log("Navbar 'Blogs' link clicked on blog.html. Cache cleared. Forcing refresh.");
            fetchBlogs(true); // Call fetchBlogs, forcing a refresh
            // Optionally, scroll to top if not already at top
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }
          // If navigating from another page, the browser will navigate to blog.html
          // and the initial fetchBlogs() call (below) will handle it.
        });
      }
      // ------------------------------------


      // Initial fetch when the page loads (still important for direct access)
      fetchBlogs();

      // Set interval for re-fetching (this will respect the 5-minute cache)
      setInterval(() => fetchBlogs(false), 5 * 60 * 1000); // Fetch every 5 minutes (respecting cache)

      // --- OPTIONAL: Retained manual refresh button ---
      const refreshBtn = document.createElement('button');
      refreshBtn.className = 'btn';
      refreshBtn.textContent = 'Refresh Blogs (Manual)';
      refreshBtn.style.marginTop = '2rem';
      refreshBtn.style.display = 'block';
      refreshBtn.style.margin = '2rem auto'; // Center the button

      refreshBtn.onclick = () => {
        console.log("Manual 'Refresh Blogs' button clicked. Cache cleared. Forcing refresh.");
        fetchBlogs(true); // Call fetchBlogs, forcing a refresh
      };
      document.querySelector('.ct').appendChild(refreshBtn);
      // -------------------------------------------------------------------
    });
  </script>
</body>

</html>